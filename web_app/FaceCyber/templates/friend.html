{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" type="text/css" href="{% static 'css/accounts_style.css' %}">
<link rel="stylesheet" type="text/css" href="{% static 'css/style.css' %}">
<link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Montserrat">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script> 
<script rel="stylesheet" type="text/javascript" src="{% static 'javaS/jspdf.debug.js' %}"></script>

<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
<!--<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/1.3.4/jspdf.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/1.3.2/jspdf.debug.js"></script>
<script rel="stylesheet" type="text/javascript" src="{% static 'javaS/jspdf.debug.js' %}"></script>
<script rel="stylesheet" type="text/javascript" src="{% static 'javaS/jspdf.min.js' %}"></script>
<script rel="stylesheet" type="text/javascript" src="{% static 'javaS/jspdf.plugin.autotable.js' %}"></script>
<script rel="stylesheet" type="text/javascript" src="{% static 'javaS/jspdf.plugin.autotable.min.js' %}"></script>-->
<title>FaceCyber Cyber-Aggression</title>
</head>

<body style="background-image:url('{%static 'image/1.jpg' %}');">
  {% block content %}
<!-- Navbar -->
<div class="w3-top">
    <div class="w3-bar w3-light-grey w3-card w3-large">
      <a class="w3-bar-item w3-padding-large">FaceCyber</a>
      <a href="/" class="w3-bar-item w3-button w3-hide-small w3-padding-large w3-right">Logout</a>
      <form action="profile" method="post">
        {% csrf_token %}
        <input type="hidden" name="profile_input" value="{{username}}">
        <button class="w3-bar-item w3-button w3-hide-small w3-padding-large w3-right" type='submit'>Profile</button>
     </form>
      <form action="friend" method="post">
        {% csrf_token %}
        <input type="hidden" name="friend_input" value="{{username}}">
        <button class="w3-bar-item w3-button w3-hide-small w3-padding-large w3-right" type='submit'>Friends</button>
     </form>
     <form action="self" method="post">
        {% csrf_token %}
        <input type="hidden" name="self_input" value="{{username}}">
        <button class="w3-bar-item w3-button w3-hide-small w3-padding-large w3-right" type='submit'>Self</button>
     </form>
      <a class="w3-bar-item w3-padding-large w3-right">Welcome {{username}}</a>
    </div>
</div>
  <div class="main box" id="main" style="color:white;">
  <!-- Header -->
  <div class="split left">
    <div class="centered">
      <div class="friend_bully box">
        <h6 class="set">Number of Friends Respond to Your Profile</h6>
        <p class="set_1">{{ranking|length}} <!--{{friend_bully_score}} {{friend_bully_score_1}} {{friend_bully_score_2}} {{friend_bully_score_3}}--></p>
        <h6>Facebook Friends Ranking</h6>
        <select name="Filter" id="table_filter" onchange="table_change()">
          <option selected hidden style="display:none">Select Ranking</option>
          {% if ranking|length >= 3 %}
            <option value="3">3</option> <!--type is string-->
          {% endif %}
          {% if ranking|length >= 5 %}
            <option value="5">5</option>
          {% endif %}
          {% if ranking|length >= 10 %}
            <option value="10">10</option>
          {% endif %}
          <option value="All">All</option>
        </select>
        <br><br><div id="table_div"style="width: 100%; height: 100px;">
          <!--{% if not ranking %}
            <div> Empty Ranking </div>
          {% else %}
            {% for user_friend in ranking %}
              {% if forloop.counter < 4 %}
                <div class="set">{{forloop.counter}} <p class="set_1">: {{user_friend.friend}} {{user_friend.score}}</p></div>
              {% endif %}
            {% endfor %}
          {% endif %}-->
          </div>
      </div> 
      <div class="friend_post box">
        <h6 class="set">Total Friends' Posts </h6>
          <p class="set_1">{{friend_post_number}}</p>
        <h6 class="set">Total Friends' Comments </h6>
        <p class="set_1">{{friend_comment_number}}</p>
        <h6 class="set">Chart Statistic</h6>
        <select name="Filter" id="chart_filter" onchange="change()">
          <option selected hidden style="display:none">Select Type</option>
          <option value="Overall">Overall</option>
          <option value="Post">Posts</option>
          <option value="Comment">Comments</option>
        </select>
        <br><br>
        <div>
        <div id="donutchart" style="width: 100%; height: 200px;"></div>
        </div>
      </div>  
    </div>
  </div>
  
  <div class="split right">
    <div class="centered">

        <div class="friend_chart">
        <div>

          <div class='barcontainer'>
            <div class='barcontainerheader'>
              Friends' Posts and Comments
            </div>
            <div style="margin-top:40px;margin-bottom:2px;text-align:left;">
            <button type="button" id="button_1" style="font-size:10px;" onclick="open_statistic()" style="display: inline;">Statistic <i style="font-size:x-large;top:5px;position:relative" class="material-icons">insert_chart</i></button>
            <button type="button" id="button_2" style="font-size:10px;" onclick="open_filter()" style="display: inline;">Messages <i style="font-size:x-large;top:5px;position:relative"class="material-icons">chat</i></button>
          </div>
            <div id="friend_bar_container" >
            <div id = "bar_control_div" style="text-align:left;">
              <strong>Statistic Filter</strong>
              <select name="Filter" id="bar_filter" onchange="bar_friend_change()">
                <option selected hidden style="display:none">Select Type</option>
                <option value="Overall">Overall</option>
                <option value="Post">Posts</option>
                <option value="Comment">Comments</option>
              </select>
              <div style="display: inline;">
                <input type="checkbox" id="check_1" class="checkboxes" checked onchange="bar_friend_change()">
                <label for="scales">Online Hate</label>
                <input type="checkbox" id="check_2" class="checkboxes" checked onchange="bar_friend_change()">
                <label for="scales">Racism</label>
                <input type="checkbox" id="check_3" class="checkboxes" checked onchange="bar_friend_change()">
                <label for="scales">Sexism</label>
                <input type="checkbox" id="check_4" class="checkboxes" checked onchange="bar_friend_change()">
                <label for="scales">Insult</label>
                <input type="checkbox" id="check_5" class="checkboxes" checked onchange="bar_friend_change()">
                <label for="scales">Obscene</label>
                <input type="checkbox" id="check_6" class="checkboxes" checked onchange="bar_friend_change()">
                <label for="scales">Toxic</label>
                <input type="checkbox" id="check_7" class="checkboxes" checked onchange="bar_friend_change()">
                <label for="scales">Normal</label>
              </div>
            </div>
            <div id="friend_bar" style="">
            <!--'height:{{onlineHate_percen}}'-->
            <!--{% if comment_onlineHate_score <= 20 %}
              <div class='bar' style='height:20%' onclick="openNav_A()">
            {% else %}
              <div class='bar' style='height:{{comment_onlineHate_score_percen}}' onclick="openNav_A()">
            {% endif %}
              {{comment_onlineHate_score}}<br>
              {{comment_onlineHate_percen}}
              <div class='barlabel'>
                Online Hate
              </div>
            </div>

            {% if comment_racism_score <= 20 %}
              <div class='bar' style='height:20%' onclick="openNav_B()">
            {% else %}
              <div class='bar' style='height:{{comment_racism_score_percen}}' onclick="openNav_B()">
            {% endif %}
              {{comment_racism_score}}<br>
              {{comment_racism_percen}}
              <div class='barlabel'>
                Racism
              </div>
            </div>

            {% if comment_sexism_score <= 20 %}
              <div class='bar' style='height:20%' onclick="openNav_C()">
            {% else %}
              <div class='bar' style='height:{{comment_sexism_score_percen}}' onclick="openNav_C()">
            {% endif %}
              {{comment_sexism_score}}<br>
              {{comment_sexism_percen}}
              <div class='barlabel'>
                Sexism
              </div>
            </div>

            {% if comment_insult_score <= 20 %}
              <div class='bar' style='height:20%' onclick="openNav_D()">
            {% else %}
              <div class='bar' style='height:{{comment_insult_score_percen}}' onclick="openNav_D()">
            {% endif %}
              {{comment_insult_score}}<br>
              {{comment_insult_percen}}
              <div class='barlabel'>
                Insult
              </div>
            </div>

            {% if comment_obscene_score <= 20 %}
              <div class='bar' style='height:20%' onclick="openNav_E()">
            {% else %}
              <div class='bar' style='height:{{comment_obscene_score_percen}}' onclick="openNav_E()">
            {% endif %}
              {{comment_obscene_score}}<br>
              {{comment_obscene_percen}}
              <div class='barlabel'>
                Obscene
              </div>
            </div>

            {% if comment_toxic_score <= 20 %}
              <div class='bar' style='height:20%' onclick="openNav_F()">
            {% else %}
              <div class='bar' style='height:{{comment_toxic_score_percen}}' onclick="openNav_F()">
            {% endif %}
              {{comment_toxic_score}}<br>
              {{comment_toxic_percen}}
              <div class='barlabel'>
                Toxic
              </div>
            </div>

            {% if comment_normal_score <= 20 %}
              <div class='bar' style='height:20%' onclick="openNav_G()">
            {% else %}
              <div class='bar' style='height:{{comment_normal_score_percen}}' onclick="openNav_G()">
            {% endif %}
              {{comment_normal_score}}<br>
              {{comment_normal_percen}}
              <div class='barlabel'>
                Normal
              </div>
            </div>-->
            </div> <!--end friend bar-->
          </div>
          <div id="friend_filter_container" style="display:none;">
            <div style="text-align:left;">
              <strong>  Messages Filter</strong>
              <select name="Filter" id="friend_name_filter" onchange="">
                <option selected hidden style="display:none">Select Name</option>
                <option value="All">All</option>
                {% for user_friend in ranking %}
                <option value="{{user_friend.friend}}">{{user_friend.friend}}</option>
                {% endfor %}
              </select>
              <select name="Filter" id="content_filter" onchange="">
                <option selected hidden style="display:none">Select Type</option>
                <option value="All">All</option>
                <option value="Post">Posts</option>
                <option value="Comment">Comments</option>
              </select>
              <div style="display: inline;">
                <input type="checkbox" id="content_check_1" class="checkboxes" checked onchange="">
                <label for="scales">Online Hate</label>
                <input type="checkbox" id="content_check_2" class="checkboxes" checked onchange="">
                <label for="scales">Racism</label>
                <input type="checkbox" id="content_check_3" class="checkboxes" checked onchange="">
                <label for="scales">Sexism</label>
                <input type="checkbox" id="content_check_4" class="checkboxes" checked onchange="">
                <label for="scales">Insult</label>
                <input type="checkbox" id="content_check_5" class="checkboxes" checked onchange="">
                <label for="scales">Obscene</label>
                <input type="checkbox" id="content_check_6" class="checkboxes" checked onchange="">
                <label for="scales">Toxic</label>
                <input type="checkbox" id="content_check_7" class="checkboxes" checked onchange="">
                <label for="scales">Normal</label>
              </div>
              <button id="button_filter" type="button" onclick="run_content_filter()" style="display: inline;">Search</button>
              <br><button id="button_demo" type="button" onclick="export_pdf()" style="display: inline;font-size:10px;">Save PDF<i style="font-size:20px;top:5px;position:relative"class="material-icons">file_download</i></button>
              <button id="button_demo" type="button" onclick="window.open('https://aduan.skmm.gov.my/Complaint/AddComplaint?NOSP=1', '_blank');" style="display: inline;font-size:10px;">Open MCMC Complaint Portal<i style="font-size:20px;top:5px;position:relative"class="material-icons">announcement</i></button>
            </div> <!--end control-->
            <div id="content_container" style="width:100%;height:600px;">
              <div id="content_container_2" class="" style="background-color:bisque;height:500px;overflow: auto;">
                
              </div>
            </div>
          </div>
          </div> <!--end barcontainer-->

        </div>
      </div>  
    </div>
  </div>
</div>
  
  <script>
    
    function export_pdf(){
      var doc = new jsPDF('p', 'pt', 'letter');
    
      //var doc = new jsPDF();
      doc.fromHTML('<h3>FaceCyber Cyber-aggression Content<h3>'+$('#content_container').html(),20,20);
      doc.save('FaceCyber cyber-aggression content.pdf');
      //find this.margins.top if got problem with pdf
        //doc.fromHTML(`<html><head><title>FaceCyber Cyber-Aggression Contents</title></head><body>` + document.getElementById("content_container").innerHTML + `</body></html>`);
        //doc.save('div.pdf');
    }

    /*function export_pdf_2(){
      var doc = new jsPDF()
      doc.autoTable(doc,{ html: '#sideContent' })
      doc.save('table.pdf')
        //doc.fromHTML(`<html><head><title>FaceCyber Cyber-Aggression Contents</title></head><body>` + document.getElementById("content_container").innerHTML + `</body></html>`);
        //doc.save('div.pdf');
    }*/

  // Used to toggle the menu on small screens when clicking on the menu button

  function openNav_A() { 
    document.getElementById("mySidebar_A").style.width = "600px";
    document.getElementById("mySidebar_B").style.width = "0";
    document.getElementById("mySidebar_C").style.width = "0";
    document.getElementById("mySidebar_D").style.width = "0";
    document.getElementById("mySidebar_E").style.width = "0";
    document.getElementById("mySidebar_F").style.width = "0";
    document.getElementById("mySidebar_G").style.width = "0";
  }

  function openNav_B() { 
    document.getElementById("mySidebar_A").style.width = "0";
    document.getElementById("mySidebar_B").style.width = "600px";
    document.getElementById("mySidebar_C").style.width = "0";
    document.getElementById("mySidebar_D").style.width = "0";
    document.getElementById("mySidebar_E").style.width = "0";
    document.getElementById("mySidebar_F").style.width = "0";
    document.getElementById("mySidebar_G").style.width = "0";
  }

  function openNav_C() { 
    document.getElementById("mySidebar_A").style.width = "0";
    document.getElementById("mySidebar_B").style.width = "0";
    document.getElementById("mySidebar_C").style.width = "600px";
    document.getElementById("mySidebar_D").style.width = "0";
    document.getElementById("mySidebar_E").style.width = "0";
    document.getElementById("mySidebar_F").style.width = "0";
    document.getElementById("mySidebar_G").style.width = "0";
  }

  function openNav_D() { 
    document.getElementById("mySidebar_A").style.width = "0";
    document.getElementById("mySidebar_B").style.width = "0";
    document.getElementById("mySidebar_C").style.width = "0";
    document.getElementById("mySidebar_D").style.width = "600px";
    document.getElementById("mySidebar_E").style.width = "0";
    document.getElementById("mySidebar_F").style.width = "0";
    document.getElementById("mySidebar_G").style.width = "0";
  }

  function openNav_E() { 
    document.getElementById("mySidebar_A").style.width = "0";
    document.getElementById("mySidebar_B").style.width = "0";
    document.getElementById("mySidebar_C").style.width = "0";
    document.getElementById("mySidebar_D").style.width = "0";
    document.getElementById("mySidebar_E").style.width = "600px";
    document.getElementById("mySidebar_F").style.width = "0";
    document.getElementById("mySidebar_G").style.width = "0";
  }

  function openNav_F() { 
    document.getElementById("mySidebar_A").style.width = "0";
    document.getElementById("mySidebar_B").style.width = "0";
    document.getElementById("mySidebar_C").style.width = "0";
    document.getElementById("mySidebar_D").style.width = "0";
    document.getElementById("mySidebar_E").style.width = "0";
    document.getElementById("mySidebar_F").style.width = "600px";
    document.getElementById("mySidebar_G").style.width = "0";
  }

  function openNav_G() { 
    document.getElementById("mySidebar_A").style.width = "0";
    document.getElementById("mySidebar_B").style.width = "0";
    document.getElementById("mySidebar_C").style.width = "0";
    document.getElementById("mySidebar_D").style.width = "0";
    document.getElementById("mySidebar_E").style.width = "0";
    document.getElementById("mySidebar_F").style.width = "0";
    document.getElementById("mySidebar_G").style.width = "600px";
  }
  
  function closeNav() {
    document.getElementById("mySidebar_A").style.width = "0";
    document.getElementById("mySidebar_B").style.width = "0";
    document.getElementById("mySidebar_C").style.width = "0";
    document.getElementById("mySidebar_D").style.width = "0";
    document.getElementById("mySidebar_E").style.width = "0";
    document.getElementById("mySidebar_F").style.width = "0";
    document.getElementById("mySidebar_G").style.width = "0";
  }

  function open_statistic(){
    document.getElementById("friend_bar_container").style.display = "block";
    document.getElementById("friend_filter_container").style.display = "none";
    document.getElementById("button_1").style.backgroundColor = "darkgrey";
    document.getElementById("button_2").style.backgroundColor = "#e7e7e7";
  }

  function open_filter(){
    document.getElementById("friend_bar_container").style.display = "none";
    document.getElementById("friend_filter_container").style.display = "block";
    document.getElementById("button_2").style.backgroundColor = "darkgrey";
    document.getElementById("button_1").style.backgroundColor = "#e7e7e7";
    var div_content = document.getElementById("content_container_2");
    var content_label = ""
    var content_count = 1;
    var comment_count = 1;
    div_content.innerHTML = "";
    content_label += '<h4 style="color:#663399;"><strong>Contents</strong></h4>';
    content_label += '<h5 style="color:black;"><strong>Posts</strong></h5>';
    content_label += '<table id="sideContent">';
    content_label += '<tr><th>No</th><th>Name</th><th>Content</th></tr>';
    {% for onlineHate_content in post_content %}
      {% if onlineHate_content.onlineHate == "1" and onlineHate_content.post_user != user_fb_name or onlineHate_content.racism == "1"  and onlineHate_content.post_user != user_fb_name or onlineHate_content.sexism == "1" and onlineHate_content.post_user != user_fb_name or onlineHate_content.insult == "1" and onlineHate_content.post_user != user_fb_name or onlineHate_content.obscene == "1" and onlineHate_content.post_user != user_fb_name or onlineHate_content.toxic == "1" and onlineHate_content.post_user != user_fb_name%}
        content_label += '<tr><td>'+content_count+'</td><td>{{onlineHate_content.post_user}}</td><td>{{onlineHate_content.content}}</td></tr>';
        content_count ++;      
      {% elif onlineHate_content.onlineHate == "0" and onlineHate_content.racism == "0" and onlineHate_content.sexism == "0" and onlineHate_content.insult == "0" and onlineHate_content.obscene == "0" and onlineHate_content.toxic == "0" and onlineHate_content.post_user != user_fb_name %}
        content_label += '<tr><td>'+content_count+'</td><td>{{onlineHate_content.post_user}}</td><td>{{onlineHate_content.content}}</td></tr>';
        content_count ++;
      {% endif %}
    {% endfor %}
    content_label += '</table><br>';
    content_label += '<h5 style="color:black;"><strong>Comments</strong></h5>';
    content_label += '<table id="sideContent">';
    content_label += '<tr><th>No</th><th>Name</th><th>Content</th></tr>';
    {% for onlineHate_comment in comment_content %}
      {% if onlineHate_comment.onlineHate == "1" and onlineHate_comment.comment_user != user_fb_name or onlineHate_comment.racism == "1" and onlineHate_comment.comment_user != user_fb_name or onlineHate_comment.sexism == "1" and onlineHate_comment.comment_user != user_fb_name or onlineHate_comment.insult == "1" and onlineHate_comment.comment_user != user_fb_name or onlineHate_comment.obscene == "1" and onlineHate_comment.comment_user != user_fb_name or onlineHate_comment.toxic == "1" and onlineHate_comment.comment_user != user_fb_name%}
        content_label += '<tr><td>'+comment_count+'</td><td>{{onlineHate_comment.comment_user}}</td><td>{{onlineHate_comment.content}}</td></tr>';
        comment_count ++;
      {% elif onlineHate_comment.onlineHate == "0" and onlineHate_comment.racism == "0" and onlineHate_comment.sexism == "0" and onlineHate_comment.insult == "0" and onlineHate_comment.obscene == "0" and onlineHate_comment.toxic == "0" and onlineHate_comment.comment_user != user_fb_name %}
        content_label += '<tr><td>'+comment_count+'</td><td>{{onlineHate_comment.comment_user}}</td><td>{{onlineHate_comment.content}}</td></tr>';
        comment_count ++;
      {% endif %}
    {% endfor %}
    content_label += '</table><br>';
    div_content.innerHTML = content_label;
}

function run_content_filter(){
  var name_select = document.getElementById("friend_name_filter");
  console.log(name_select.value);
  var content_select = document.getElementById("content_filter");
  console.log(content_select.value);
  const tick_1 = document.getElementById('content_check_1');
  console.log("hate"+tick_1.checked);
  const tick_2 = document.getElementById('content_check_2');
  console.log("racism"+tick_2.checked);
  const tick_3 = document.getElementById('content_check_3');
  console.log("sexism"+tick_3.checked);
  const tick_4 = document.getElementById('content_check_4');
  console.log("insult"+tick_4.checked);
  const tick_5 = document.getElementById('content_check_5');
  console.log("obscene"+tick_5.checked);
  const tick_6 = document.getElementById('content_check_6');
  console.log("Toxic"+tick_6.checked);
  const tick_7 = document.getElementById('content_check_7');
  console.log("Normal"+tick_7.checked);
  var div_content = document.getElementById("content_container_2");
  div_content.innerHTML = "";
  var content_label="";
  var content_count = 1;
  var comment_count = 1;
  var racism_tag, sexism_tag, insult_tag, obscene_tag, toxic_tag;
  if(name_select.value == "Select Name" || name_select.value == "All"){
    if (content_select.value == "Select Type" || content_select.value == "All" ){
      content_label += '<h4 style="color:#663399;"><strong>Contents</strong></h4>';
      content_label += '<h5 style="color:black;"><strong>Posts</strong></h5>';
      content_label += '<table id="sideContent">';
      content_label += '<tr><th>No</th><th>Name</th><th>Content</th></tr>';
        {% for onlineHate_content in post_content %}
        {% if onlineHate_content.onlineHate == "1" and onlineHate_content.post_user != user_fb_name or onlineHate_content.racism == "1" and onlineHate_content.post_user != user_fb_name or onlineHate_content.sexism == "1" and onlineHate_content.post_user != user_fb_name or onlineHate_content.insult == "1" and onlineHate_content.post_user != user_fb_name or onlineHate_content.obscene == "1" and onlineHate_content.post_user != user_fb_name or onlineHate_content.toxic == "1" and onlineHate_content.post_user != user_fb_name%}
            if(tick_1.checked){
              if({{onlineHate_content.onlineHate}} == "1" ){
                if({{onlineHate_content.racism}} == "1" ){
                  racism_tag = 1;
                }
                if({{onlineHate_content.sexism}} == "1" ){
                  sexism_tag = 1
                }
                if({{onlineHate_content.insult}} == "1" ){
                  insult_tag = 1;
                }
                if({{onlineHate_content.obscene}} == "1" ){
                  obscene_tag = 1;
                }
                if({{onlineHate_content.toxic}} == "1" ){
                  toxic_tag = 1;
                }
                if({{onlineHate_content.onlineHate}} == "1" ){
                  content_label += '<tr><td>'+content_count+'</td><td>{{onlineHate_content.post_user}}</td><td>{{onlineHate_content.content}}</td></tr>';
                  content_count++;
                }
              }
            }
            if(tick_2.checked){
              if(racism_tag == 1){
                //nothing
              }
              else{
                if({{onlineHate_content.racism}} == "1" ){
                  if({{onlineHate_content.sexism}} == "1" ){
                    sexism_tag = 1;
                  }
                  if({{onlineHate_content.insult}} == "1" ){
                    insult_tag = 1;
                  }
                  if({{onlineHate_content.obscene}} == "1" ){
                    obscene_tag = 1;
                  }
                  if({{onlineHate_content.toxic}} == "1" ){
                    toxic_tag = 1;
                  }
                  if({{onlineHate_content.racism}} == "1" ){
                    content_label += '<tr><td>'+content_count+'</td><td>{{onlineHate_content.post_user}}</td><td>{{onlineHate_content.content}}</td></tr>';
                    content_count++;
                  }
                }
              }
            }
            if(tick_3.checked){
              if(sexism_tag == 1){
                //nothing
              }
              else{
                if({{onlineHate_content.sexism}} == "1"){
                  if({{onlineHate_content.insult}} == "1"){
                    insult_tag = 1;
                  }
                  if({{onlineHate_content.obscene}} == "1"){
                    obscene_tag = 1;
                  }       
                  if({{onlineHate_content.toxic}} == "1"){
                    toxic_tag = 1;
                  }
                  if({{onlineHate_content.sexism}} == "1"){
                    content_label += '<tr><td>'+content_count+'</td><td>{{onlineHate_content.post_user}}</td><td>{{onlineHate_content.content}}</td></tr>';
                    content_count++;
                  }
                }
              }
            }
            if(tick_4.checked){
              if(insult_tag == 1){
                //nothing
              }
              else{
                if({{onlineHate_content.insult}} == "1"){
                  if({{onlineHate_content.obscene}} == "1"){
                    obscene_tag = 1;
                  }
                  if({{onlineHate_content.toxic}} == "1"){
                    toxic_tag = 1;
                  }
                  if({{onlineHate_content.insult}} == "1"){
                    content_label += '<tr><td>'+content_count+'</td><td>{{onlineHate_content.post_user}}</td><td>{{onlineHate_content.content}}</td></tr>';
                    content_count++;
                  }
                }
              }   
            }
            if(tick_5.checked){
              if(obscene_tag == 1){
                //nothing
              }
              else{
                if({{onlineHate_content.obscene}} == "1"){
                  if({{onlineHate_content.toxic}} == "1"){
                    toxic_tag = 1;
                  }
                  if({{onlineHate_content.obscene}} == "1"){
                    content_label += '<tr><td>'+content_count+'</td><td>{{onlineHate_content.post_user}}</td><td>{{onlineHate_content.content}}</td></tr>';
                    content_count++;
                  }
                }
              }
            }
            if(tick_6.checked){
              if(toxic_tag == 1){
                //nothing
              }
              else{
                if({{onlineHate_content.toxic}} == "1"){
                  if({{onlineHate_content.toxic}} == "1"){
                    content_label += '<tr><td>'+content_count+'</td><td>{{onlineHate_content.post_user}}</td><td>{{onlineHate_content.content}}</td></tr>';
                    content_count++;
                  }
                }
              }
            }
            racism_tag =0;
            sexism_tag =0;
            insult_tag =0;
            obscene_tag =0;
            toxic_tag =0;
          {% elif onlineHate_content.onlineHate == "0" and onlineHate_content.racism == "0" and onlineHate_content.sexism == "0" and onlineHate_content.insult == "0" and onlineHate_content.obscene == "0" and onlineHate_content.toxic == "0" and onlineHate_content.post_user != user_fb_name %}
            if(tick_7.checked){
              content_label += '<tr><td>'+content_count+'</td><td>{{onlineHate_content.post_user}}</td><td>{{onlineHate_content.content}}</td></tr>';
              content_count++;
            }
          {% endif %}
        {% endfor %}
        content_label += '</table><br>';
        content_label += '<h5 style="color:black;"><strong>Comments</strong></h5>';
        content_label += '<table id="sideContent">';
        content_label += '<tr><th>No</th><th>Name</th><th>Content</th></tr>';
        {% for onlineHate_comment in comment_content %}
          {% if onlineHate_comment.onlineHate == "1" and onlineHate_comment.comment_user != user_fb_name or onlineHate_comment.racism == "1" and onlineHate_comment.comment_user != user_fb_name or onlineHate_comment.sexism == "1" and onlineHate_comment.comment_user != user_fb_name or onlineHate_comment.insult == "1" and onlineHate_comment.comment_user != user_fb_name or onlineHate_comment.obscene == "1" and onlineHate_comment.comment_user != user_fb_name or onlineHate_comment.toxic == "1" and onlineHate_comment.comment_user != user_fb_name%}
            if(tick_1.checked){
              if({{onlineHate_comment.onlineHate}} == "1" ){
                if({{onlineHate_comment.racism}} == "1" ){
                  racism_tag = 1;
                }
                if({{onlineHate_comment.sexism}} == "1" ){
                  sexism_tag = 1
                }
                if({{onlineHate_comment.insult}} == "1" ){
                  insult_tag = 1;
                }
                if({{onlineHate_comment.obscene}} == "1" ){
                  obscene_tag = 1;
                }
                if({{onlineHate_comment.toxic}} == "1" ){
                  toxic_tag = 1;
                }
                if({{onlineHate_comment.onlineHate}} == "1" ){
                  content_label += '<tr><td>'+comment_count+'</td><td>{{onlineHate_comment.comment_user}}</td><td>{{onlineHate_comment.content}}</td></tr>';
                  comment_count++;
                }
              }
            }
            if(tick_2.checked){
              if(racism_tag == 1){
                //nothing
              }
              else{
                if({{onlineHate_comment.racism}} == "1" ){
                  if({{onlineHate_comment.sexism}} == "1" ){
                    sexism_tag = 1;
                  }
                  if({{onlineHate_comment.insult}} == "1" ){
                    insult_tag = 1;
                  }
                  if({{onlineHate_comment.obscene}} == "1" ){
                    obscene_tag = 1;
                  }
                  if({{onlineHate_comment.toxic}} == "1" ){
                    toxic_tag = 1;
                  }
                  if({{onlineHate_comment.racism}} == "1" ){
                    content_label += '<tr><td>'+comment_count+'</td><td>{{onlineHate_comment.comment_user}}</td><td>{{onlineHate_comment.content}}</td></tr>';
                    comment_count++;
                  }
                }
              }
            }
            if(tick_3.checked){
              if(sexism_tag == 1){
                //nothing
              }
              else{
                if({{onlineHate_comment.sexism}} == "1"){
                  if({{onlineHate_comment.insult}} == "1"){
                    insult_tag = 1;
                  }
                  if({{onlineHate_comment.obscene}} == "1"){
                    obscene_tag = 1;
                  }       
                  if({{onlineHate_comment.toxic}} == "1"){
                    toxic_tag = 1;
                  }
                  if({{onlineHate_comment.sexism}} == "1"){
                    content_label += '<tr><td>'+comment_count+'</td><td>{{onlineHate_comment.comment_user}}</td><td>{{onlineHate_comment.content}}</td></tr>';
                    comment_count++;
                  }
                }
              }
            }
            if(tick_4.checked){
              if(insult_tag == 1){
                //nothing
              }
              else{
                if({{onlineHate_comment.insult}} == "1"){
                  if({{onlineHate_comment.obscene}} == "1"){
                    obscene_tag = 1;
                  }
                  if({{onlineHate_comment.toxic}} == "1"){
                    toxic_tag = 1;
                  }
                  if({{onlineHate_comment.insult}} == "1"){
                    content_label += '<tr><td>'+comment_count+'</td><td>{{onlineHate_comment.comment_user}}</td><td>{{onlineHate_comment.content}}</td></tr>';
                    comment_count++;
                  }
                }
              }   
            }
            if(tick_5.checked){
              if(obscene_tag == 1){
                //nothing
              }
              else{
                if({{onlineHate_comment.obscene}} == "1"){
                  if({{onlineHate_comment.toxic}} == "1"){
                    toxic_tag = 1;
                  }
                  if({{onlineHate_comment.obscene}} == "1"){
                    content_label += '<tr><td>'+comment_count+'</td><td>{{onlineHate_comment.comment_user}}</td><td>{{onlineHate_comment.content}}</td></tr>';
                    comment_count++;
                  }
                }
              }
            }
            if(tick_6.checked){
              if(toxic_tag == 1){
                //nothing
              }
              else{
                if({{onlineHate_comment.toxic}} == "1"){
                  if({{onlineHate_comment.toxic}} == "1"){
                    content_label += '<tr><td>'+comment_count+'</td><td>{{onlineHate_comment.comment_user}}</td><td>{{onlineHate_comment.content}}</td></tr>';
                    comment_count++;
                  }
                }
              }
            }
            racism_tag =0;
            sexism_tag =0;
            insult_tag =0;
            obscene_tag =0;
            toxic_tag =0;
          {% elif onlineHate_comment.onlineHate == "0" and onlineHate_comment.racism == "0" and onlineHate_comment.sexism == "0" and onlineHate_comment.insult == "0" and onlineHate_comment.obscene == "0" and onlineHate_comment.toxic == "0" and onlineHate_comment.comment_user != user_fb_name %}
            if(tick_7.checked){
              content_label += '<tr><td>'+comment_count+'</td><td>{{onlineHate_comment.comment_user}}</td><td>{{onlineHate_comment.content}}</td></tr>';
              comment_count++;
            }
          {% endif %}
        {% endfor %}
        content_label += '</table><br>';
    }
    else if(content_select.value == "Post"){
      content_label += '<h4 style="color:#663399;"><strong>Contents</strong></h4>';
      content_label += '<h5 style="color:black;"><strong>Posts</strong></h5>';
      content_label += '<table id="sideContent">';
      content_label += '<tr><th>No</th><th>Name</th><th>Content</th></tr>';
        {% for onlineHate_content in post_content %}
          {% if onlineHate_content.onlineHate == "1" and onlineHate_content.post_user != user_fb_name or onlineHate_content.racism == "1" and onlineHate_content.post_user != user_fb_name or onlineHate_content.sexism == "1" and onlineHate_content.post_user != user_fb_name or onlineHate_content.insult == "1" and onlineHate_content.post_user != user_fb_name or onlineHate_content.obscene == "1" and onlineHate_content.post_user != user_fb_name or onlineHate_content.toxic == "1" and onlineHate_content.post_user != user_fb_name%}
            if(tick_1.checked){
              if({{onlineHate_content.onlineHate}} == "1" ){
                if({{onlineHate_content.racism}} == "1" ){
                  racism_tag = 1;
                }
                if({{onlineHate_content.sexism}} == "1" ){
                  sexism_tag = 1
                }
                if({{onlineHate_content.insult}} == "1" ){
                  insult_tag = 1;
                }
                if({{onlineHate_content.obscene}} == "1" ){
                  obscene_tag = 1;
                }
                if({{onlineHate_content.toxic}} == "1" ){
                  toxic_tag = 1;
                }
                if({{onlineHate_content.onlineHate}} == "1" ){
                  content_label += '<tr><td>'+content_count+'</td><td>{{onlineHate_content.post_user}}</td><td>{{onlineHate_content.content}}</td></tr>';
                  content_count++;
                }
              }
            }
            if(tick_2.checked){
              if(racism_tag == 1){
                //nothing
              }
              else{
                if({{onlineHate_content.racism}} == "1" ){
                  if({{onlineHate_content.sexism}} == "1" ){
                    sexism_tag = 1;
                  }
                  if({{onlineHate_content.insult}} == "1" ){
                    insult_tag = 1;
                  }
                  if({{onlineHate_content.obscene}} == "1" ){
                    obscene_tag = 1;
                  }
                  if({{onlineHate_content.toxic}} == "1" ){
                    toxic_tag = 1;
                  }
                  if({{onlineHate_content.racism}} == "1" ){
                    content_label += '<tr><td>'+content_count+'</td><td>{{onlineHate_content.post_user}}</td><td>{{onlineHate_content.content}}</td></tr>';
                    content_count++;
                  }
                }
              }
            }
            if(tick_3.checked){
              if(sexism_tag == 1){
                //nothing
              }
              else{
                if({{onlineHate_content.sexism}} == "1"){
                  if({{onlineHate_content.insult}} == "1"){
                    insult_tag = 1;
                  }
                  if({{onlineHate_content.obscene}} == "1"){
                    obscene_tag = 1;
                  }       
                  if({{onlineHate_content.toxic}} == "1"){
                    toxic_tag = 1;
                  }
                  if({{onlineHate_content.sexism}} == "1"){
                    content_label += '<tr><td>'+content_count+'</td><td>{{onlineHate_content.post_user}}</td><td>{{onlineHate_content.content}}</td></tr>';
                    content_count++;
                  }
                }
              }
            }
            if(tick_4.checked){
              if(insult_tag == 1){
                //nothing
              }
              else{
                if({{onlineHate_content.insult}} == "1"){
                  if({{onlineHate_content.obscene}} == "1"){
                    obscene_tag = 1;
                  }
                  if({{onlineHate_content.toxic}} == "1"){
                    toxic_tag = 1;
                  }
                  if({{onlineHate_content.insult}} == "1"){
                    content_label += '<tr><td>'+content_count+'</td><td>{{onlineHate_content.post_user}}</td><td>{{onlineHate_content.content}}</td></tr>';
                    content_count++;
                  }
                }
              }   
            }
            if(tick_5.checked){
              if(obscene_tag == 1){
                //nothing
              }
              else{
                if({{onlineHate_content.obscene}} == "1"){
                  if({{onlineHate_content.toxic}} == "1"){
                    toxic_tag = 1;
                  }
                  if({{onlineHate_content.obscene}} == "1"){
                    content_label += '<tr><td>'+content_count+'</td><td>{{onlineHate_content.post_user}}</td><td>{{onlineHate_content.content}}</td></tr>';
                    content_count++;
                  }
                }
              }
            }
            if(tick_6.checked){
              if(toxic_tag == 1){
                //nothing
              }
              else{
                if({{onlineHate_content.toxic}} == "1"){
                  if({{onlineHate_content.toxic}} == "1"){
                    content_label += '<tr><td>'+content_count+'</td><td>{{onlineHate_content.post_user}}</td><td>{{onlineHate_content.content}}</td></tr>';
                    content_count++;
                  }
                }
              }
            }
            racism_tag =0;
            sexism_tag =0;
            insult_tag =0;
            obscene_tag =0;
            toxic_tag =0;
          {% elif onlineHate_content.onlineHate == "0" and onlineHate_content.racism == "0" and onlineHate_content.sexism == "0" and onlineHate_content.insult == "0" and onlineHate_content.obscene == "0" and onlineHate_content.toxic == "0" and onlineHate_content.post_user != user_fb_name %}
            if(tick_7.checked){
              content_label += '<tr><td>'+content_count+'</td><td>{{onlineHate_content.post_user}}</td><td>{{onlineHate_content.content}}</td></tr>';
              content_count++;
            }
          {% endif %}
        {% endfor %}
        content_label += '</table><br>';
    }
    else if(content_select.value == "Comment"){
        content_label += '<h4 style="color:#663399;"><strong>Contents</strong></h4>';
        content_label += '<h5 style="color:black;"><strong>Comments</strong></h5>';
        content_label += '<table id="sideContent">';
        content_label += '<tr><th>No</th><th>Name</th><th>Content</th></tr>';
        {% for onlineHate_comment in comment_content %}
          {% if onlineHate_comment.onlineHate == "1" and onlineHate_comment.comment_user != user_fb_name or onlineHate_comment.racism == "1" and onlineHate_comment.comment_user != user_fb_name or onlineHate_comment.sexism == "1" and onlineHate_comment.comment_user != user_fb_name or onlineHate_comment.insult == "1" and onlineHate_comment.comment_user != user_fb_name or onlineHate_comment.obscene == "1" and onlineHate_comment.comment_user != user_fb_name or onlineHate_comment.toxic == "1" and onlineHate_comment.comment_user != user_fb_name%}
            if(tick_1.checked){
              if({{onlineHate_comment.onlineHate}} == "1" ){
                if({{onlineHate_comment.racism}} == "1" ){
                  racism_tag = 1;
                }
                if({{onlineHate_comment.sexism}} == "1" ){
                  sexism_tag = 1
                }
                if({{onlineHate_comment.insult}} == "1" ){
                  insult_tag = 1;
                }
                if({{onlineHate_comment.obscene}} == "1" ){
                  obscene_tag = 1;
                }
                if({{onlineHate_comment.toxic}} == "1" ){
                  toxic_tag = 1;
                }
                if({{onlineHate_comment.onlineHate}} == "1" ){
                  content_label += '<tr><td>'+comment_count+'</td><td>{{onlineHate_comment.comment_user}}</td><td>{{onlineHate_comment.content}}</td></tr>';
                  comment_count++;
                }
              }
            }
            if(tick_2.checked){
              if(racism_tag == 1){
                //nothing
              }
              else{
                if({{onlineHate_comment.racism}} == "1" ){
                  if({{onlineHate_comment.sexism}} == "1" ){
                    sexism_tag = 1;
                  }
                  if({{onlineHate_comment.insult}} == "1" ){
                    insult_tag = 1;
                  }
                  if({{onlineHate_comment.obscene}} == "1" ){
                    obscene_tag = 1;
                  }
                  if({{onlineHate_comment.toxic}} == "1" ){
                    toxic_tag = 1;
                  }
                  if({{onlineHate_comment.racism}} == "1" ){
                    content_label += '<tr><td>'+comment_count+'</td><td>{{onlineHate_comment.comment_user}}</td><td>{{onlineHate_comment.content}}</td></tr>';
                    comment_count++;
                  }
                }
              }
            }
            if(tick_3.checked){
              if(sexism_tag == 1){
                //nothing
              }
              else{
                if({{onlineHate_comment.sexism}} == "1"){
                  if({{onlineHate_comment.insult}} == "1"){
                    insult_tag = 1;
                  }
                  if({{onlineHate_comment.obscene}} == "1"){
                    obscene_tag = 1;
                  }       
                  if({{onlineHate_comment.toxic}} == "1"){
                    toxic_tag = 1;
                  }
                  if({{onlineHate_comment.sexism}} == "1"){
                    content_label += '<tr><td>'+comment_count+'</td><td>{{onlineHate_comment.comment_user}}</td><td>{{onlineHate_comment.content}}</td></tr>';
                    comment_count++;
                  }
                }
              }
            }
            if(tick_4.checked){
              if(insult_tag == 1){
                //nothing
              }
              else{
                if({{onlineHate_comment.insult}} == "1"){
                  if({{onlineHate_comment.obscene}} == "1"){
                    obscene_tag = 1;
                  }
                  if({{onlineHate_comment.toxic}} == "1"){
                    toxic_tag = 1;
                  }
                  if({{onlineHate_comment.insult}} == "1"){
                    content_label += '<tr><td>'+comment_count+'</td><td>{{onlineHate_comment.comment_user}}</td><td>{{onlineHate_comment.content}}</td></tr>';
                    comment_count++;
                  }
                }
              }   
            }
            if(tick_5.checked){
              if(obscene_tag == 1){
                //nothing
              }
              else{
                if({{onlineHate_comment.obscene}} == "1"){
                  if({{onlineHate_comment.toxic}} == "1"){
                    toxic_tag = 1;
                  }
                  if({{onlineHate_comment.obscene}} == "1"){
                    content_label += '<tr><td>'+comment_count+'</td><td>{{onlineHate_comment.comment_user}}</td><td>{{onlineHate_comment.content}}</td></tr>';
                    comment_count++;
                  }
                }
              }
            }
            if(tick_6.checked){
              if(toxic_tag == 1){
                //nothing
              }
              else{
                if({{onlineHate_comment.toxic}} == "1"){
                  if({{onlineHate_comment.toxic}} == "1"){
                    content_label += '<tr><td>'+comment_count+'</td><td>{{onlineHate_comment.comment_user}}</td><td>{{onlineHate_comment.content}}</td></tr>';
                    comment_count++;
                  }
                }
              }
            }
            racism_tag =0;
            sexism_tag =0;
            insult_tag =0;
            obscene_tag =0;
            toxic_tag =0;
          {% elif onlineHate_comment.onlineHate == "0" and onlineHate_comment.racism == "0" and onlineHate_comment.sexism == "0" and onlineHate_comment.insult == "0" and onlineHate_comment.obscene == "0" and onlineHate_comment.toxic == "0" and onlineHate_comment.comment_user != user_fb_name %}
            if(tick_7.checked){
              content_label += '<tr><td>'+comment_count+'</td><td>{{onlineHate_comment.comment_user}}</td><td>{{onlineHate_comment.content}}</td></tr>';
              comment_count++;
            }
          {% endif %}
        {% endfor %}
        content_label += '</table><br>';
    }
  }
  else{
    if (content_select.value == "Select Type" || content_select.value == "All" ){
      content_label += '<h4 style="color:#663399;"><strong>Contents</strong></h4>';
      content_label += '<h5 style="color:black;"><strong>Posts</strong></h5>';
      content_label += '<table id="sideContent">';
      content_label += '<tr><th>No</th><th>Name</th><th>Content</th></tr>';
        {% for onlineHate_content in post_content %}
          if({{onlineHate_content.onlineHate}} == "1" && "{{onlineHate_content.post_user}}" == name_select.value || {{onlineHate_content.racism}} == "1" && "{{onlineHate_content.post_user}}" == name_select.value || {{onlineHate_content.sexism}} == "1" && "{{onlineHate_content.post_user}}" == name_select.value || {{onlineHate_content.insult}} == "1" && "{{onlineHate_content.post_user}}" == name_select.value || {{onlineHate_content.obscene}} == "1" && "{{onlineHate_content.post_user}}" == name_select.value || {{onlineHate_content.toxic}} == "1" && "{{onlineHate_content.post_user}}" == name_select.value){
              if(tick_1.checked){
                if({{onlineHate_content.onlineHate}} == "1" ){
                  if({{onlineHate_content.racism}} == "1" ){
                    racism_tag = 1;
                  }
                  if({{onlineHate_content.sexism}} == "1" ){
                    sexism_tag = 1
                  }
                  if({{onlineHate_content.insult}} == "1" ){
                    insult_tag = 1;
                  }
                  if({{onlineHate_content.obscene}} == "1" ){
                    obscene_tag = 1;
                  }
                  if({{onlineHate_content.toxic}} == "1" ){
                    toxic_tag = 1;
                  }
                  if({{onlineHate_content.onlineHate}} == "1" ){
                    content_label += '<tr><td>'+content_count+'</td><td>{{onlineHate_content.post_user}}</td><td>{{onlineHate_content.content}}</td></tr>';
                    content_count++;
                  }
                }
              }
              if(tick_2.checked){
                if(racism_tag == 1){
                  //nothing
                }
                else{
                  if({{onlineHate_content.racism}} == "1" ){
                    if({{onlineHate_content.sexism}} == "1" ){
                      sexism_tag = 1;
                    }
                    if({{onlineHate_content.insult}} == "1" ){
                      insult_tag = 1;
                    }
                    if({{onlineHate_content.obscene}} == "1" ){
                      obscene_tag = 1;
                    }
                    if({{onlineHate_content.toxic}} == "1" ){
                      toxic_tag = 1;
                    }
                    if({{onlineHate_content.racism}} == "1" ){
                      content_label += '<tr><td>'+content_count+'</td><td>{{onlineHate_content.post_user}}</td><td>{{onlineHate_content.content}}</td></tr>';
                      content_count++;
                    }
                  }
                }
              }
              if(tick_3.checked){
                if(sexism_tag == 1){
                  //nothing
                }
                else{
                  if({{onlineHate_content.sexism}} == "1"){
                    if({{onlineHate_content.insult}} == "1"){
                      insult_tag = 1;
                    }
                    if({{onlineHate_content.obscene}} == "1"){
                      obscene_tag = 1;
                    }       
                    if({{onlineHate_content.toxic}} == "1"){
                      toxic_tag = 1;
                    }
                    if({{onlineHate_content.sexism}} == "1"){
                      content_label += '<tr><td>'+content_count+'</td><td>{{onlineHate_content.post_user}}</td><td>{{onlineHate_content.content}}</td></tr>';
                      content_count++;
                    }
                  }
                }
              }
              if(tick_4.checked){
                if(insult_tag == 1){
                  //nothing
                }
                else{
                  if({{onlineHate_content.insult}} == "1"){
                    if({{onlineHate_content.obscene}} == "1"){
                      obscene_tag = 1;
                    }
                    if({{onlineHate_content.toxic}} == "1"){
                      toxic_tag = 1;
                    }
                    if({{onlineHate_content.insult}} == "1"){
                      content_label += '<tr><td>'+content_count+'</td><td>{{onlineHate_content.post_user}}</td><td>{{onlineHate_content.content}}</td></tr>';
                      content_count++;
                    }
                  }
                }   
              }
              if(tick_5.checked){
                if(obscene_tag == 1){
                  //nothing
                }
                else{
                  if({{onlineHate_content.obscene}} == "1"){
                    if({{onlineHate_content.toxic}} == "1"){
                      toxic_tag = 1;
                    }
                    if({{onlineHate_content.obscene}} == "1"){
                      content_label += '<tr><td>'+content_count+'</td><td>{{onlineHate_content.post_user}}</td><td>{{onlineHate_content.content}}</td></tr>';
                      content_count++;
                    }
                  }
                }
              }
              if(tick_6.checked){
                if(toxic_tag == 1){
                  //nothing
                }
                else{
                  if({{onlineHate_content.toxic}} == "1"){
                    if({{onlineHate_content.toxic}} == "1"){
                      content_label += '<tr><td>'+content_count+'</td><td>{{onlineHate_content.post_user}}</td><td>{{onlineHate_content.content}}</td></tr>';
                      content_count++;
                    }
                  }
                }
              }
              racism_tag =0;
              sexism_tag =0;
              insult_tag =0;
              obscene_tag =0;
              toxic_tag =0;
          }
          else if({{onlineHate_content.onlineHate}} == "0" && {{onlineHate_content.racism}} == "0" && {{onlineHate_content.sexism}} == "0" && {{onlineHate_content.insult}} == "0" && {{onlineHate_content.obscene}} == "0" && {{onlineHate_content.toxic}} == "0" && "{{onlineHate_content.post_user}}" == name_select.value){
              if(tick_7.checked){
                content_label += '<tr><td>'+content_count+'</td><td>{{onlineHate_content.post_user}}</td><td>{{onlineHate_content.content}}</td></tr>';
                content_count++;
              }
          }
        {% endfor %}
        content_label += '</table><br>';
        content_label += '<h5 style="color:black;"><strong>Comments</strong></h5>';
        content_label += '<table id="sideContent">';
        content_label += '<tr><th>No</th><th>Name</th><th>Content</th></tr>';
        {% for onlineHate_comment in comment_content %}
          if({{onlineHate_comment.onlineHate}} == "1" && "{{onlineHate_comment.comment_user}}" == name_select.value || {{onlineHate_comment.racism}} == "1" && "{{onlineHate_comment.comment_user}}" == name_select.value || {{onlineHate_comment.sexism}} == "1" && "{{onlineHate_comment.comment_user}}" == name_select.value || {{onlineHate_comment.insult}} == "1" && "{{onlineHate_comment.comment_user}}" == name_select.value || {{onlineHate_comment.obscene}} == "1" && "{{onlineHate_comment.comment_user}}" == name_select.value || {{onlineHate_comment.toxic}} == "1" && "{{onlineHate_comment.comment_user}}" == name_select.value){
            if(tick_1.checked){
              if({{onlineHate_comment.onlineHate}} == "1" ){
                if({{onlineHate_comment.racism}} == "1" ){
                  racism_tag = 1;
                }
                if({{onlineHate_comment.sexism}} == "1" ){
                  sexism_tag = 1
                }
                if({{onlineHate_comment.insult}} == "1" ){
                  insult_tag = 1;
                }
                if({{onlineHate_comment.obscene}} == "1" ){
                  obscene_tag = 1;
                }
                if({{onlineHate_comment.toxic}} == "1" ){
                  toxic_tag = 1;
                }
                if({{onlineHate_comment.onlineHate}} == "1" ){
                  content_label += '<tr><td>'+comment_count+'</td><td>{{onlineHate_comment.comment_user}}</td><td>{{onlineHate_comment.content}}</td></tr>';
                  comment_count++; 
                }
              }
            }
            if(tick_2.checked){
              if(racism_tag == 1){
                //nothing
              }
              else{
                if({{onlineHate_comment.racism}} == "1" ){
                  if({{onlineHate_comment.sexism}} == "1" ){
                    sexism_tag = 1;
                  }
                  if({{onlineHate_comment.insult}} == "1" ){
                    insult_tag = 1;
                  }
                  if({{onlineHate_comment.obscene}} == "1" ){
                    obscene_tag = 1;
                  }
                  if({{onlineHate_comment.toxic}} == "1" ){
                    toxic_tag = 1;
                  }
                  if({{onlineHate_comment.racism}} == "1" ){
                    content_label += '<tr><td>'+comment_count+'</td><td>{{onlineHate_comment.comment_user}}</td><td>{{onlineHate_comment.content}}</td></tr>';
                    comment_count++; 
                  }
                }
              }
            }
            if(tick_3.checked){
              if(sexism_tag == 1){
                //nothing
              }
              else{
                if({{onlineHate_comment.sexism}} == "1"){
                  if({{onlineHate_comment.insult}} == "1"){
                    insult_tag = 1;
                  }
                  if({{onlineHate_comment.obscene}} == "1"){
                    obscene_tag = 1;
                  }       
                  if({{onlineHate_comment.toxic}} == "1"){
                    toxic_tag = 1;
                  }
                  if({{onlineHate_comment.sexism}} == "1"){
                    content_label += '<tr><td>'+comment_count+'</td><td>{{onlineHate_comment.comment_user}}</td><td>{{onlineHate_comment.content}}</td></tr>';
                    comment_count++; 
                  }
                }
              }
            }
            if(tick_4.checked){
              if(insult_tag == 1){
                //nothing
              }
              else{
                if({{onlineHate_comment.insult}} == "1"){
                  if({{onlineHate_comment.obscene}} == "1"){
                    obscene_tag = 1;
                  }
                  if({{onlineHate_comment.toxic}} == "1"){
                    toxic_tag = 1;
                  }
                  if({{onlineHate_comment.insult}} == "1"){
                    content_label += '<tr><td>'+comment_count+'</td><td>{{onlineHate_comment.comment_user}}</td><td>{{onlineHate_comment.content}}</td></tr>';
                    comment_count++; 
                  }
                }
              }   
            }
            if(tick_5.checked){
              if(obscene_tag == 1){
                //nothing
              }
              else{
                if({{onlineHate_comment.obscene}} == "1"){
                  if({{onlineHate_comment.toxic}} == "1"){
                    toxic_tag = 1;
                  }
                  if({{onlineHate_comment.obscene}} == "1"){
                    content_label += '<tr><td>'+comment_count+'</td><td>{{onlineHate_comment.comment_user}}</td><td>{{onlineHate_comment.content}}</td></tr>';
                    comment_count++; 
                  }
                }
              }
            }
            if(tick_6.checked){
              if(toxic_tag == 1){
                //nothing
              }
              else{
                if({{onlineHate_comment.toxic}} == "1"){
                  if({{onlineHate_comment.toxic}} == "1"){
                    content_label += '<tr><td>'+comment_count+'</td><td>{{onlineHate_comment.comment_user}}</td><td>{{onlineHate_comment.content}}</td></tr>';
                    comment_count++; 
                  }
                }
              }
            }
            racism_tag =0;
            sexism_tag =0;
            insult_tag =0;
            obscene_tag =0;
            toxic_tag =0;
          }
          else if( {{onlineHate_comment.onlineHate}} == "0" && {{onlineHate_comment.racism}} == "0" && {{onlineHate_comment.sexism}} == "0" && {{onlineHate_comment.insult}} == "0" && {{onlineHate_comment.obscene}} == "0" && {{onlineHate_comment.toxic}} == "0" && "{{onlineHate_comment.comment_user}}" == name_select.value ){
            if(tick_7.checked){
              content_label += '<tr><td>'+comment_count+'</td><td>{{onlineHate_comment.comment_user}}</td><td>{{onlineHate_comment.content}}</td></tr>';
              comment_count++; 
            }
          } 
        {% endfor %}
        content_label += '</table><br>';
    }
    else if(content_select.value == "Post"){
        content_label += '<h4 style="color:#663399;"><strong>Contents</strong></h4>';
        content_label += '<h5 style="color:black;"><strong>Posts</strong></h5>';
        content_label += '<table id="sideContent">';
        content_label += '<tr><th>No</th><th>Name</th><th>Content</th></tr>';
        {% for onlineHate_content in post_content %}
          if({{onlineHate_content.onlineHate}} == "1" && "{{onlineHate_content.post_user}}" == name_select.value || {{onlineHate_content.racism}} == "1" && "{{onlineHate_content.post_user}}" == name_select.value || {{onlineHate_content.sexism}} == "1" && "{{onlineHate_content.post_user}}" == name_select.value || {{onlineHate_content.insult}} == "1" && "{{onlineHate_content.post_user}}" == name_select.value || {{onlineHate_content.obscene}} == "1" && "{{onlineHate_content.post_user}}" == name_select.value || {{onlineHate_content.toxic}} == "1" && "{{onlineHate_content.post_user}}" == name_select.value){
            if(tick_1.checked){
              if({{onlineHate_content.onlineHate}} == "1" ){
                if({{onlineHate_content.racism}} == "1" ){
                  racism_tag = 1;
                }
                if({{onlineHate_content.sexism}} == "1" ){
                  sexism_tag = 1
                }
                if({{onlineHate_content.insult}} == "1" ){
                  insult_tag = 1;
                }
                if({{onlineHate_content.obscene}} == "1" ){
                  obscene_tag = 1;
                }
                if({{onlineHate_content.toxic}} == "1" ){
                  toxic_tag = 1;
                }
                if({{onlineHate_content.onlineHate}} == "1" ){
                  content_label += '<tr><td>'+content_count+'</td><td>{{onlineHate_content.post_user}}</td><td>{{onlineHate_content.content}}</td></tr>';
                  content_count++;
                }
              }
            }
            if(tick_2.checked){
              if(racism_tag == 1){
                //nothing
              }
              else{
                if({{onlineHate_content.racism}} == "1" ){
                  if({{onlineHate_content.sexism}} == "1" ){
                    sexism_tag = 1;
                  }
                  if({{onlineHate_content.insult}} == "1" ){
                    insult_tag = 1;
                  }
                  if({{onlineHate_content.obscene}} == "1" ){
                    obscene_tag = 1;
                  }
                  if({{onlineHate_content.toxic}} == "1" ){
                    toxic_tag = 1;
                  }
                  if({{onlineHate_content.racism}} == "1" ){
                    content_label += '<tr><td>'+content_count+'</td><td>{{onlineHate_content.post_user}}</td><td>{{onlineHate_content.content}}</td></tr>';
                    content_count++;
                  }
                }
              }
            }
            if(tick_3.checked){
              if(sexism_tag == 1){
                //nothing
              }
              else{
                if({{onlineHate_content.sexism}} == "1"){
                  if({{onlineHate_content.insult}} == "1"){
                    insult_tag = 1;
                  }
                  if({{onlineHate_content.obscene}} == "1"){
                    obscene_tag = 1;
                  }       
                  if({{onlineHate_content.toxic}} == "1"){
                    toxic_tag = 1;
                  }
                  if({{onlineHate_content.sexism}} == "1"){
                    content_label += '<tr><td>'+content_count+'</td><td>{{onlineHate_content.post_user}}</td><td>{{onlineHate_content.content}}</td></tr>';
                    content_count++;
                  }
                }
              }
            }
            if(tick_4.checked){
              if(insult_tag == 1){
                //nothing
              }
              else{
                if({{onlineHate_content.insult}} == "1"){
                  if({{onlineHate_content.obscene}} == "1"){
                    obscene_tag = 1;
                  }
                  if({{onlineHate_content.toxic}} == "1"){
                    toxic_tag = 1;
                  }
                  if({{onlineHate_content.insult}} == "1"){
                    content_label += '<tr><td>'+content_count+'</td><td>{{onlineHate_content.post_user}}</td><td>{{onlineHate_content.content}}</td></tr>';
                    content_count++;
                  }
                }
              }   
            }
            if(tick_5.checked){
              if(obscene_tag == 1){
                //nothing
              }
              else{
                if({{onlineHate_content.obscene}} == "1"){
                  if({{onlineHate_content.toxic}} == "1"){
                    toxic_tag = 1;
                  }
                  if({{onlineHate_content.obscene}} == "1"){
                    content_label += '<tr><td>'+content_count+'</td><td>{{onlineHate_content.post_user}}</td><td>{{onlineHate_content.content}}</td></tr>';
                    content_count++;
                  }
                }
              }
            }
            if(tick_6.checked){
              if(toxic_tag == 1){
                //nothing
              }
              else{
                if({{onlineHate_content.toxic}} == "1"){
                  if({{onlineHate_content.toxic}} == "1"){
                    content_label += '<tr><td>'+content_count+'</td><td>{{onlineHate_content.post_user}}</td><td>{{onlineHate_content.content}}</td></tr>';
                    content_count++;
                  }
                }
              }
            }
            racism_tag =0;
            sexism_tag =0;
            insult_tag =0;
            obscene_tag =0;
            toxic_tag =0;
          }
          else if({{onlineHate_content.onlineHate}} == "0" && {{onlineHate_content.racism}} == "0" && {{onlineHate_content.sexism}} == "0" && {{onlineHate_content.insult}} == "0" && {{onlineHate_content.obscene}} == "0" && {{onlineHate_content.toxic}} == "0" && "{{onlineHate_content.post_user}}" == name_select.value){
            if(tick_7.checked){
              content_label += '<tr><td>'+content_count+'</td><td>{{onlineHate_content.post_user}}</td><td>{{onlineHate_content.content}}</td></tr>';
              content_count++;
            }
          }
        {% endfor %}
        content_label += '</table><br>';
    }
    else if(content_select.value == "Comment"){
        content_label += '<h4 style="color:#663399;"><strong>Contents</strong></h4>';
        content_label += '<h5 style="color:black;"><strong>Comments</strong></h5>';
        content_label += '<table id="sideContent">';
        content_label += '<tr><th>No</th><th>Name</th><th>Content</th></tr>';
        {% for onlineHate_comment in comment_content %}
          if({{onlineHate_comment.onlineHate}} == "1" && "{{onlineHate_comment.comment_user}}" == name_select.value || {{onlineHate_comment.racism}} == "1" && "{{onlineHate_comment.comment_user}}" == name_select.value || {{onlineHate_comment.sexism}} == "1" && "{{onlineHate_comment.comment_user}}" == name_select.value || {{onlineHate_comment.insult}} == "1" && "{{onlineHate_comment.comment_user}}" == name_select.value || {{onlineHate_comment.obscene}} == "1" && "{{onlineHate_comment.comment_user}}" == name_select.value || {{onlineHate_comment.toxic}} == "1" && "{{onlineHate_comment.comment_user}}" == name_select.value){
            if(tick_1.checked){
              if({{onlineHate_comment.onlineHate}} == "1" ){
                if({{onlineHate_comment.racism}} == "1" ){
                  racism_tag = 1;
                }
                if({{onlineHate_comment.sexism}} == "1" ){
                  sexism_tag = 1
                }
                if({{onlineHate_comment.insult}} == "1" ){
                  insult_tag = 1;
                }
                if({{onlineHate_comment.obscene}} == "1" ){
                  obscene_tag = 1;
                }
                if({{onlineHate_comment.toxic}} == "1" ){
                  toxic_tag = 1;
                }
                if({{onlineHate_comment.onlineHate}} == "1" ){
                  content_label += '<tr><td>'+comment_count+'</td><td>{{onlineHate_comment.comment_user}}</td><td>{{onlineHate_comment.content}}</td></tr>';
                  comment_count++;
                }
              }
            }
            if(tick_2.checked){
              if(racism_tag == 1){
                //nothing
              }
              else{
                if({{onlineHate_comment.racism}} == "1" ){
                  if({{onlineHate_comment.sexism}} == "1" ){
                    sexism_tag = 1;
                  }
                  if({{onlineHate_comment.insult}} == "1" ){
                    insult_tag = 1;
                  }
                  if({{onlineHate_comment.obscene}} == "1" ){
                    obscene_tag = 1;
                  }
                  if({{onlineHate_comment.toxic}} == "1" ){
                    toxic_tag = 1;
                  }
                  if({{onlineHate_comment.racism}} == "1" ){
                    content_label += '<tr><td>'+comment_count+'</td><td>{{onlineHate_comment.comment_user}}</td><td>{{onlineHate_comment.content}}</td></tr>';
                    comment_count++;
                  }
                }
              }
            }
            if(tick_3.checked){
              if(sexism_tag == 1){
                //nothing
              }
              else{
                if({{onlineHate_comment.sexism}} == "1"){
                  if({{onlineHate_comment.insult}} == "1"){
                    insult_tag = 1;
                  }
                  if({{onlineHate_comment.obscene}} == "1"){
                    obscene_tag = 1;
                  }       
                  if({{onlineHate_comment.toxic}} == "1"){
                    toxic_tag = 1;
                  }
                  if({{onlineHate_comment.sexism}} == "1"){
                    content_label += '<tr><td>'+comment_count+'</td><td>{{onlineHate_comment.comment_user}}</td><td>{{onlineHate_comment.content}}</td></tr>';
                    comment_count++;
                  }
                }
              }
            }
            if(tick_4.checked){
              if(insult_tag == 1){
                //nothing
              }
              else{
                if({{onlineHate_comment.insult}} == "1"){
                  if({{onlineHate_comment.obscene}} == "1"){
                    obscene_tag = 1;
                  }
                  if({{onlineHate_comment.toxic}} == "1"){
                    toxic_tag = 1;
                  }
                  if({{onlineHate_comment.insult}} == "1"){
                    content_label += '<tr><td>'+comment_count+'</td><td>{{onlineHate_comment.comment_user}}</td><td>{{onlineHate_comment.content}}</td></tr>';
                    comment_count++;
                  }
                }
              }   
            }
            if(tick_5.checked){
              if(obscene_tag == 1){
                //nothing
              }
              else{
                if({{onlineHate_comment.obscene}} == "1"){
                  if({{onlineHate_comment.toxic}} == "1"){
                    toxic_tag = 1;
                  }
                  if({{onlineHate_comment.obscene}} == "1"){
                    content_label += '<tr><td>'+comment_count+'</td><td>{{onlineHate_comment.comment_user}}</td><td>{{onlineHate_comment.content}}</td></tr>';
                    comment_count++;
                  }
                }
              }
            }
            if(tick_6.checked){
              if(toxic_tag == 1){
                //nothing
              }
              else{
                if({{onlineHate_comment.toxic}} == "1"){
                  if({{onlineHate_comment.toxic}} == "1"){
                    content_label += '<tr><td>'+comment_count+'</td><td>{{onlineHate_comment.comment_user}}</td><td>{{onlineHate_comment.content}}</td></tr>';
                    comment_count++;
                  }
                }
              }
            }
            racism_tag =0;
            sexism_tag =0;
            insult_tag =0;
            obscene_tag =0;
            toxic_tag =0;
          }
          else if( {{onlineHate_comment.onlineHate}} == "0" && {{onlineHate_comment.racism}} == "0" && {{onlineHate_comment.sexism}} == "0" && {{onlineHate_comment.insult}} == "0" && {{onlineHate_comment.obscene}} == "0" && {{onlineHate_comment.toxic}} == "0" && "{{onlineHate_comment.comment_user}}" == name_select.value ){
            if(tick_7.checked){
              content_label += '<tr><td>'+comment_count+'</td><td>{{onlineHate_comment.comment_user}}</td><td>{{onlineHate_comment.content}}</td></tr>';
              comment_count++;
            }
          }
        {% endfor %}
        content_label += '</table><br>';
    }
  }
  div_content.innerHTML = content_label;
}
  </script>
  <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
    <script type="text/javascript">
      google.charts.load("current", {packages:["corechart"]});
      google.charts.setOnLoadCallback(drawChart);

      function drawChart() {
        var data = google.visualization.arrayToDataTable([
        ['Content', 'Total Number'],
        ['Aggressive Contents', {{total_friend_toxic}}],
        ['Non-Aggressive Contents', {{comment_normal_score}}]
        ]);

        var options = {
          'title':'Overall',
          titleTextStyle: {
            color: 'white',
            fontName: 'Arial',
            fontSize: 15
          },
          'height':'100%',
          'width':'100%',
          pieHole: 0.4,
          'backgroundColor': 'transparent',
          chartArea:{left:110,bottom:40,width:"100%",height:"80%"},
          legend: { textStyle: {color: 'white'},position: 'right', alignment: 'start' },
        };

        var chart = new google.visualization.PieChart(document.getElementById('donutchart'));
        chart.draw(data, options);
        // initial value
        /*var percent = 0;
        // start the animation loop
        var handler = setInterval(function(){
        // values increment
        percent += 1;
        // apply new values
        data.setValue(1, 1, percent);
        data.setValue(0, 1, {{total_friend_toxic}} + {{comment_normal_score}} - percent);
        // update the pie
        chart.draw(data, options);
        // check if we have reached the desired value
        if (percent >= {{comment_normal_score}})
        // stop the loop
          clearInterval(handler);
        }, 30);*/
      }

      function change(){
      var listbox = document.getElementById("chart_filter");
      var selIndex = listbox.selectedIndex;
      var selValue = listbox.options[selIndex].value;
      //document.getElementById("donutchart").style.display = "none";
      //document.getElementById("donutchart_1").style.display = "block";
      google.charts.setOnLoadCallback(drawChart_1);

      function drawChart_1(){
        var data_overall = google.visualization.arrayToDataTable([
        ['Number', 'Total Number'],
        ['Aggressive Contents', {{total_friend_toxic}}],
        ['Non-Aggressive Contents', {{comment_normal_score}}]
      ]);

      var data_post = google.visualization.arrayToDataTable([
        ['Number', 'Total Number'],
        ['Aggressive Posts', {{total_friend_toxic_post}}],
        ['Non-aggressive Posts', {{friend_non_toxic_post}}]
      ]);

      var data_comment = google.visualization.arrayToDataTable([
        ['Number', 'Total Number'],
        ['Aggressive Comments', {{total_friend_toxic_comment}}],
        ['Non-aggressive Comments', {{friend_non_toxic_comment}}]
      ]);

      var options_overall = {
        'title':'Overall',
        titleTextStyle: {
          color: 'white',
          fontName: 'Arial',
          fontSize: 15
        },
        'height':'100%',
        'width':'100%',
        pieHole: 0.4,
        'backgroundColor': 'transparent',
        chartArea:{left:110,bottom:40,width:"100%",height:"80%"},
        legend: { textStyle: {color: 'white'},position: 'right', alignment: 'start' },
      };

      var options_post = {
        'title':'Posts',
        titleTextStyle: {
          color: 'white',
          fontName: 'Arial',
          fontSize: 15
        },
        'height':'100%',
        'width':'100%',
        pieHole: 0.4,
        'backgroundColor': 'transparent',
        chartArea:{left:110,bottom:40,width:"100%",height:"80%"},
        legend: { textStyle: {color: 'white'},position: 'right', alignment: 'start' },
      };

      var options_comment = {
        'title':'Comments',
        titleTextStyle: {
          color: 'white',
          fontName: 'Arial',
          fontSize: 15
        },
        'height':'100%',
        'width':'100%',
        pieHole: 0.4,
        'backgroundColor': 'transparent',
        chartArea:{left:110,bottom:40,width:"100%",height:"80%"},
        legend: { textStyle: {color: 'white'},position: 'right', alignment: 'start' },
      };

        var chart = new google.visualization.PieChart(document.getElementById('donutchart'));
        if (selValue == 'Overall') {
          chart.draw(data_overall, options_overall);
          /*var percent = 0;
          var handler = setInterval(function(){
          percent += 1;
          data_overall.setValue(1, 1, percent);
          data_overall.setValue(0, 1, {{total_friend_toxic}} + {{comment_normal_score}} - percent);
          chart.draw(data_overall, options_overall);
          if (percent >= {{comment_normal_score}})
            clearInterval(handler);
          }, 30);*/
        }
        else if (selValue == 'Post') {
          chart.draw(data_post, options_post);
          /*var percent = 0;
          var handler = setInterval(function(){
          percent += 1;
          data_post.setValue(1, 1, percent);
          data_post.setValue(0, 1, {{total_friend_toxic_post}} + {{friend_non_toxic_post}} - percent);
          chart.draw(data_post, options_post);
          if (percent >= {{friend_non_toxic_post}})
            clearInterval(handler);
          }, 30);*/
        }
        else if (selValue == 'Comment') {
          chart.draw(data_comment, options_comment);
          /*var percent = 0;
          var handler = setInterval(function(){
          percent += 1;
          data_comment.setValue(1, 1, percent);
          data_comment.setValue(0, 1, {{total_friend_toxic_comment}} + {{friend_non_toxic_comment}} - percent);
          chart.draw(data_comment, options_comment);
          if (percent >= {{friend_non_toxic_comment}})
            clearInterval(handler);
          }, 30);*/
        }
        
      }//end draw table
    }//end onchange
    </script>
    <script type="text/javascript">
      google.charts.load('current', {'packages':['table']});
      google.charts.setOnLoadCallback(drawTable);

      function drawTable() {
        var data = new google.visualization.DataTable();
        data.addColumn('string', 'Name');
        data.addColumn('string', 'Bully Score');
        data.addColumn('string', 'Bully Scale');
        {% for user_friend in ranking %}
          {% if forloop.counter < 4 %}
              {%if user_friend.bully_score <= 20 %} //->A/B
                data.addRow(['{{user_friend.friend}}', '{{user_friend.bully_score}}%' , '']);
                //<div class="set">{{forloop.counter}} <p class="set_1">: {{user_friend.friend}} {{user_friend.score}}</p></div>
              {%elif user_friend.bully_score <= 40 %}
                data.addRow(['{{user_friend.friend}}', '{{user_friend.bully_score}}%' , '']);
              {%elif user_friend.bully_score <= 60 %}
                data.addRow(['{{user_friend.friend}}', '{{user_friend.bully_score}}%' , '']);
              {% else %}
                data.addRow(['{{user_friend.friend}}', '{{user_friend.bully_score}}%' , '']);
              {% endif %}
          {% endif %}
        {% endfor %}
        var table = new google.visualization.Table(document.getElementById('table_div'));

        var cssClassNames = {
          headerRow: 'header-row-style',
          tableRow: 'row-style',
          oddTableRow: 'odd-row-style',
          headerCell: 'header-cell-style'
        };
      
        var options = {
          showRowNumber: true,
          width: '90%', 
          height: '100%',
          cssClassNames: cssClassNames
        };

        table.draw(data, options);
      }

      function table_change(){
        var listbox = document.getElementById("table_filter");
        var selIndex = listbox.selectedIndex;
        var selValue = listbox.options[selIndex].value;
        var input_range;
        console.log(selValue);
        console.log(typeof selValue);
        if(selValue == "3"){
          input_range = 3;
        }
        else if(selValue == "5"){
          input_range = 5;
        }
        else if(selValue == "10"){
          input_range = 10;
        }
        else if(selValue == "All"){
          input_range = {{ranking|length}};
        }
        console.log(input_range);
        google.charts.setOnLoadCallback(drawTable_1);

        function drawTable_1() {
          var data = new google.visualization.DataTable();
          data.addColumn('string', 'Name');
          data.addColumn('string', 'Bully Score');
          data.addColumn('string', 'Bully Scale');
        if(input_range >= {{ranking|length}}){
          {% for user_friend in ranking %}
            {%if user_friend.bully_score <=  20 %} //->A/B
              data.addRow(['{{user_friend.friend}}', '{{user_friend.bully_score}}%', '']);
              //<div class="set">{{forloop.counter}} <p class="set_1">: {{user_friend.friend}} {{user_friend.score}}</p></div>
            {%elif user_friend.bully_score <= 40 %}
              data.addRow(['{{user_friend.friend}}', '{{user_friend.bully_score}}%', '']);
            {%elif user_friend.bully_score <= 60 %}
              data.addRow(['{{user_friend.friend}}', '{{user_friend.bully_score}}%', '']);
            {% else %}
              data.addRow(['{{user_friend.friend}}', '{{user_friend.bully_score}}%', '']);
            {% endif %}
          {% endfor %}
        }
        else{
          {% for user_friend in ranking %}
            if( input_range >= {{forloop.counter}}){
              {%if user_friend.bully_score <= 20 %} //->A/B
                data.addRow(['{{user_friend.friend}}', '{{user_friend.bully_score}}%' , '']);
                //<div class="set">{{forloop.counter}} <p class="set_1">: {{user_friend.friend}} {{user_friend.score}}</p></div>
              {%elif user_friend.bully_score <= 40 %}
                data.addRow(['{{user_friend.friend}}', '{{user_friend.bully_score}}%' , '']);
              {%elif user_friend.bully_score <= 60 %}
                data.addRow(['{{user_friend.friend}}', '{{user_friend.bully_score}}%' , '']);
              {% else %}
                data.addRow(['{{user_friend.friend}}', '{{user_friend.bully_score}}%' , '']);
              {% endif %}
            }
          {% endfor %}
        }
          var table = new google.visualization.Table(document.getElementById('table_div'));
  
          var cssClassNames = {
            headerRow: 'header-row-style',
            tableRow: 'row-style',
            oddTableRow: 'odd-row-style',
            headerCell: 'header-cell-style'
          };
        
          var options = {
            showRowNumber: true,
            width: '90%', 
            height: '100%',
            cssClassNames: cssClassNames
          };
  
          table.draw(data, options);
        }
      }
    </script>
    <script type="text/javascript">

      // Load the Visualization API and the piechart package.
      google.charts.load('current', {'packages':['corechart']});

      // Set a callback to run when the Google Visualization API is loaded.
      google.charts.setOnLoadCallback(drawChart);

      // Callback that creates and populates a data table, 
      // instantiates the pie chart, passes in the data and
      // draws it.
      function drawChart() {

        var data = new google.visualization.DataTable();
        data.addColumn('string', 'Labels');
        data.addColumn('number', 'Posts');
        data.addColumn({type: 'string', role: 'annotation'});
        data.addColumn({type: 'string', role: 'tooltip'});
        data.addColumn('number', 'Comments');
        data.addColumn({type: 'string', role: 'annotation'});
        data.addColumn({type: 'string', role: 'tooltip'});
        data.addRows([
          ["Online Hate",{{friend_post_onlineHate}},"{{friend_post_onlineHate}}","Online Hate\nPosts:{{friend_post_onlineHate}}",{{friend_comment_onlineHate}},"{{friend_comment_onlineHate}}","Online Hate\nComments:{{friend_comment_onlineHate}}"],
          ["Racism", {{friend_post_racism}},"{{friend_post_racism}}","Racism\nPosts:{{friend_post_racism}}",{{friend_comment_racism}},"{{friend_comment_racism}}","Racism\nComments:{{friend_comment_racism}}"],
          ["Sexism", {{friend_post_sexism}},"{{friend_post_sexism}}","Sexism\nPosts:{{friend_post_sexism}}",{{friend_comment_sexism}},"{{friend_comment_sexism}}","Sexism\nComments:{{friend_comment_sexism}}"],
          ["Insult", {{friend_post_insult}},"{{friend_post_insult}}","Insult\nPosts:{{friend_post_insult}}",{{friend_comment_insult}},"{{friend_comment_insult}}","Insult\nComments:{{friend_comment_insult}}"],
          ["Obscene", {{friend_post_obscene}},"{{friend_post_obscene}}","Obscene\nPosts:{{friend_post_obscene}}",{{friend_comment_obscene}},"{{friend_comment_obscene}}","Obscene\nComments:{{friend_comment_obscene}}"],
          ["Toxic", {{friend_post_toxic}},"{{friend_post_toxic}}","Toxic\nPosts:{{friend_post_toxic}}",{{friend_comment_toxic}},"{{friend_comment_toxic}}","Toxic\nComments:{{friend_comment_toxic}}"],
          ["Normal", {{friend_non_toxic_post}},"{{friend_non_toxic_post}}","Normal\nPosts:{{friend_non_toxic_post}}",{{friend_non_toxic_comment}},"{{friend_non_toxic_comment}}","Normal\nComments:{{friend_non_toxic_comment}}"]
        ]);

      // Set chart options
      var options = {'title':'Cyber-aggression Catergory',
                      titleTextStyle: {
                        color: 'white',
                      },
                      'width':950,
                      'height':550,
                     'backgroundColor': 'transparent',
                     vAxis: {title: 'Counts',titleTextStyle : {bold: 'true',color: 'white'},textStyle:{color: 'white'},gridlines: {color: 'none'},format:'0'},
                     hAxis: {title: 'Labels',titleTextStyle : {bold: 'true'},textStyle:{bold: 'true'},gridlines: {color: 'none'}},
                     horizontalAlign: "center",
                     chartArea:{bottom:"50",width:"70%",height:"90%"},
                     isStacked: true,
                     legend: { textStyle: {color: 'white'} }
                    }
                     

      // Instantiate and draw our chart, passing in some options.
      var chart = new google.visualization.ColumnChart(document.getElementById('friend_bar'));

      //google.visualization.events.addListener(chart, 'select', selectHandler); 
      chart.draw(data, options);
    }

    function bar_friend_change(){

      var listbox = document.getElementById("bar_filter");
      var selIndex = listbox.selectedIndex;
      var selValue = listbox.options[selIndex].value;
      console.log(selValue);
      const tick_1 = document.getElementById('check_1');
      console.log("hate"+tick_1.checked);
      const tick_2 = document.getElementById('check_2');
      console.log("racism"+tick_2.checked);
      const tick_3 = document.getElementById('check_3');
      console.log("sexism"+tick_3.checked);
      const tick_4 = document.getElementById('check_4');
      console.log("insult"+tick_4.checked);
      const tick_5 = document.getElementById('check_5');
      console.log("obscene"+tick_5.checked);
      const tick_6 = document.getElementById('check_6');
      console.log("Toxic"+tick_6.checked);
      const tick_7 = document.getElementById('check_7');
      console.log("Normal"+tick_7.checked);
      var checkBoxes = document.getElementsByClassName( 'checkboxes' );
      var isChecked = 0;
          for (var i = 0; i < checkBoxes.length; i++) {
              if ( ! checkBoxes[i].checked ) {
                console.log(isChecked);
                  isChecked +=1;
              }
          }
          if ( isChecked == 6 ) {
            for (var i = 0; i < checkBoxes.length; i++) {
              if ( checkBoxes[i].checked ) {
                console.log(checkBoxes[i]);
                checkBoxes[i].disabled = true;
              }
          }
          } 
          else{
            for (var i = 0; i < checkBoxes.length; i++) {
                checkBoxes[i].disabled = false;
              }
          }
      //document.getElementById("donutchart").style.display = "none";
      //document.getElementById("donutchart_1").style.display = "block";
      google.charts.setOnLoadCallback(drawChart_2);

      function drawChart_2() {

        var data = new google.visualization.DataTable();

        if(selValue == "Overall" || selValue == "Select Type"){
          data.addColumn('string', 'Labels');
          data.addColumn('number', 'Posts');
          data.addColumn({type: 'string', role: 'annotation'});
          data.addColumn({type: 'string', role: 'tooltip'});
          data.addColumn('number', 'Comments');
          data.addColumn({type: 'string', role: 'annotation'});
          data.addColumn({type: 'string', role: 'tooltip'});
          if(tick_1.checked){
            data.addRow(["Online Hate",{{friend_post_onlineHate}},"{{friend_post_onlineHate}}","Online Hate\nPosts:{{friend_post_onlineHate}}",{{friend_comment_onlineHate}},"{{friend_comment_onlineHate}}","Online Hate\nComments:{{friend_comment_onlineHate}}"]);
          }
          if(tick_2.checked){
            data.addRow(["Racism", {{friend_post_racism}},"{{friend_post_racism}}","Racism\nPosts:{{friend_post_racism}}",{{friend_comment_racism}},"{{friend_comment_racism}}","Racism\nComments:{{friend_comment_racism}}"]);
          }
          if(tick_3.checked){
            data.addRow(["Sexism", {{friend_post_sexism}},"{{friend_post_sexism}}","Sexism\nPosts:{{friend_post_sexism}}",{{friend_comment_sexism}},"{{friend_comment_sexism}}","Sexism\nComments:{{friend_comment_sexism}}"]);
          }
          if(tick_4.checked){
            data.addRow(["Insult", {{friend_post_insult}},"{{friend_post_insult}}","Insult\nPosts:{{friend_post_insult}}",{{friend_comment_insult}},"{{friend_comment_insult}}","Insult\nComments:{{friend_comment_insult}}"]);
          }
          if(tick_5.checked){
            data.addRow(["Obscene", {{friend_post_obscene}},"{{friend_post_obscene}}","Obscene\nPosts:{{friend_post_obscene}}",{{friend_comment_obscene}},"{{friend_comment_obscene}}","Obscene\nComments:{{friend_comment_obscene}}"]);
          }
          if(tick_6.checked){
            data.addRow(["Toxic", {{friend_post_toxic}},"{{friend_post_toxic}}","Toxic\nPosts:{{friend_post_toxic}}",{{friend_comment_toxic}},"{{friend_comment_toxic}}","Toxic\nComments:{{friend_comment_toxic}}"]);
          }
          if(tick_7.checked){
            data.addRow(["Normal", {{friend_non_toxic_post}},"{{friend_non_toxic_post}}","Normal\nPosts:{{friend_non_toxic_post}}",{{friend_non_toxic_comment}},"{{friend_non_toxic_comment}}","Normal\nComments:{{friend_non_toxic_comment}}"]);
          }
        }
        else if(selValue == "Post"){
          data.addColumn('string', 'Labels');
          data.addColumn('number', 'Posts');
          data.addColumn({type: 'string', role: 'annotation'});
          data.addColumn({type: 'string', role: 'tooltip'});
          if(tick_1.checked){
            data.addRow(["Online Hate",{{friend_post_onlineHate}},"{{friend_post_onlineHate}}","Online Hate\nPosts:{{friend_post_onlineHate}}"]);
          }
          if(tick_2.checked){
            data.addRow(["Racism", {{friend_post_racism}},"{{friend_post_racism}}","Racism\nPosts:{{friend_post_racism}}"]);
          }
          if(tick_3.checked){
            data.addRow(["Sexism", {{friend_post_sexism}},"{{friend_post_sexism}}","Sexism\nPosts:{{friend_post_sexism}}"]);
          }
          if(tick_4.checked){
            data.addRow(["Insult", {{friend_post_insult}},"{{friend_post_insult}}","Insult\nPosts:{{friend_post_insult}}"]);
          }
          if(tick_5.checked){
            data.addRow(["Obscene", {{friend_post_obscene}},"{{friend_post_obscene}}","Obscene\nPosts:{{friend_post_obscene}}"]);
          }
          if(tick_6.checked){
            data.addRow(["Toxic", {{friend_post_toxic}},"{{friend_post_toxic}}","Toxic\nPosts:{{friend_post_toxic}}"]);
          }
          if(tick_7.checked){
            data.addRow(["Normal", {{friend_non_toxic_post}},"{{friend_non_toxic_post}}","Normal\nPosts:{{friend_non_toxic_post}}"]);
          }
        }
        else if(selValue == "Comment"){
          data.addColumn('string', 'Labels');
          data.addColumn('number', 'Comments');
          data.addColumn({type: 'string', role: 'annotation'});
          data.addColumn({type: 'string', role: 'tooltip'});
          //data.addColumn({ role: 'style' });
          if(tick_1.checked){
            data.addRow(["Online Hate",{{friend_comment_onlineHate}},"{{friend_comment_onlineHate}}","Online Hate\nComments:{{friend_comment_onlineHate}}"]);
          }
          if(tick_2.checked){
            data.addRow(["Racism", {{friend_comment_racism}},"{{friend_comment_racism}}","Racism\nComments:{{friend_comment_racism}}"]);
          }
          if(tick_3.checked){
            data.addRow(["Sexism", {{friend_comment_sexism}},"{{friend_comment_sexism}}","Sexism\nComments:{{friend_comment_sexism}}"]);
          }
          if(tick_4.checked){
            data.addRow(["Insult", {{friend_comment_insult}},"{{friend_comment_insult}}","Insult\nComments:{{friend_comment_insult}}"]);
          }
          if(tick_5.checked){
            data.addRow(["Obscene", {{friend_comment_obscene}},"{{friend_comment_obscene}}","Obscene\nComments:{{friend_comment_obscene}}"]);
          }
          if(tick_6.checked){
            data.addRow(["Toxic", {{friend_comment_toxic}},"{{friend_comment_toxic}}","Toxic\nComments:{{friend_comment_toxic}}"]);
          }
          if(tick_7.checked){
            data.addRow(["Normal", {{friend_non_toxic_comment}},"{{friend_non_toxic_comment}}","Normal\nComments:{{friend_non_toxic_comment}}"]);
          }
        }

      // Set chart options
      var options = {'title':'Cyber-aggression Catergory',
                      titleTextStyle: {
                        color: 'white',
                      },
                      'width':950,
                      'height':550,
                     'backgroundColor': 'transparent',
                     vAxis: {title: 'Counts',titleTextStyle : {bold: 'true',color: 'white'},textStyle:{color: 'white'},gridlines: {color: 'none'},format:'0'},
                     hAxis: {title: 'Labels',titleTextStyle : {bold: 'true'},textStyle:{bold: 'true'},gridlines: {color: 'none'}},
                     horizontalAlign: "center",
                     chartArea:{bottom:"50",width:"70%",height:"90%"},
                     isStacked: true,
                     legend: { textStyle: {color: 'white'} }
                    }

      var options_orange = {'title':'Cyber-aggression Catergory',
             titleTextStyle: {
               color: 'white',
             },
             'width':950,
             'height':550,
            'backgroundColor': 'transparent',
            vAxis: {title: 'Counts',titleTextStyle : {bold: 'true',color: 'white'},textStyle:{color: 'white'},gridlines: {color: 'none'},format:'0'},
            hAxis: {title: 'Labels',titleTextStyle : {bold: 'true'},textStyle:{bold: 'true'},gridlines: {color: 'none'}},
            horizontalAlign: "center",
            chartArea:{bottom:"50",width:"70%",height:"90%"},
            isStacked: true,
            legend: { textStyle: {color: 'white'} },
            colors: ['#DC3912']
           }


      var chart = new google.visualization.ColumnChart(document.getElementById('friend_bar'));
      if(selValue == "Comment"){
        chart.draw(data, options_orange);
      }
      else{
        chart.draw(data, options);
      }
      
    }

    }
    </script>
  {% endblock %}
</body>
</html>